
<!DOCTYPE html>
<html lang="" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SRE博客 - DevOps_SRE_自动化运维</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="sre,运维,Linux,oracle,数据库,网络,MySQL,云计算,Docker,K8s,信息安全,Hack,"> 
    <meta name="description" content="\|/世界上的一切都是唯一的\|/,"> 
    <meta name="author" content="Ji Xiang"> 
    <link rel="alternative" href="atom.xml" title="SRE博客" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">SED单行脚本快速参考（Unix 流编辑器）</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">SED单行脚本快速参考（Unix 流编辑器）</h1>
        <div class="stuff">
            <span>十月 22, 2018</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/shell/">shell</a></li></ul>


        </div>
        <div class="content markdown">
            <h1 id="SED单行脚本快速参考（Unix-流编辑器）"><a href="#SED单行脚本快速参考（Unix-流编辑器）" class="headerlink" title="SED单行脚本快速参考（Unix 流编辑器）"></a>SED单行脚本快速参考（Unix 流编辑器）</h1><hr>
<h2 id="文本间隔："><a href="#文本间隔：" class="headerlink" title="文本间隔："></a>文本间隔：</h2><h3 id="在每一行后面增加一空行"><a href="#在每一行后面增加一空行" class="headerlink" title="在每一行后面增加一空行"></a>在每一行后面增加一空行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed G</span><br></pre></td></tr></table></figure>
<h3 id="将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。"><a href="#将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。" class="headerlink" title="将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。"></a>将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^$/d;G'</span></span><br></pre></td></tr></table></figure>
<h3 id="在每一行后面增加两行空行"><a href="#在每一行后面增加两行空行" class="headerlink" title="在每一行后面增加两行空行"></a>在每一行后面增加两行空行</h3><p> sed ‘G;G’</p>
<h2 id="将第一个脚本所产生的所有空行删除（即删除所有偶数行）"><a href="#将第一个脚本所产生的所有空行删除（即删除所有偶数行）" class="headerlink" title="将第一个脚本所产生的所有空行删除（即删除所有偶数行）"></a>将第一个脚本所产生的所有空行删除（即删除所有偶数行）</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'n;d'</span></span><br></pre></td></tr></table></figure>
<h3 id="在匹配式样“regex”的行之前插入一空行"><a href="#在匹配式样“regex”的行之前插入一空行" class="headerlink" title="在匹配式样“regex”的行之前插入一空行"></a>在匹配式样“regex”的行之前插入一空行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/regex/&#123;x;p;x;&#125;'</span></span><br></pre></td></tr></table></figure>
<h3 id="在匹配式样“regex”的行之后插入一空行"><a href="#在匹配式样“regex”的行之后插入一空行" class="headerlink" title="在匹配式样“regex”的行之后插入一空行"></a>在匹配式样“regex”的行之后插入一空行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/regex/G'</span></span><br></pre></td></tr></table></figure>
<h3 id="在匹配式样“regex”的行之前和之后各插入一空行"><a href="#在匹配式样“regex”的行之前和之后各插入一空行" class="headerlink" title="在匹配式样“regex”的行之前和之后各插入一空行"></a>在匹配式样“regex”的行之前和之后各插入一空行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/regex/&#123;x;p;x;G;&#125;'</span></span><br></pre></td></tr></table></figure>
<h2 id="编号："><a href="#编号：" class="headerlink" title="编号："></a>编号：</h2><h3 id="为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”"><a href="#为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”" class="headerlink" title="为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”"></a>为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”</h3><h3 id="（tab，见本文末尾关于’-t’的用法的描述）而不是空格来对齐边缘。"><a href="#（tab，见本文末尾关于’-t’的用法的描述）而不是空格来对齐边缘。" class="headerlink" title="（tab，见本文末尾关于’\t’的用法的描述）而不是空格来对齐边缘。"></a>（tab，见本文末尾关于’\t’的用法的描述）而不是空格来对齐边缘。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed = filename | sed <span class="string">'N;s/\n/\t/'</span></span><br></pre></td></tr></table></figure>
<h3 id="对文件中的所有行编号（行号在左，文字右端对齐）。"><a href="#对文件中的所有行编号（行号在左，文字右端对齐）。" class="headerlink" title="对文件中的所有行编号（行号在左，文字右端对齐）。"></a>对文件中的所有行编号（行号在左，文字右端对齐）。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed = filename | sed <span class="string">'N; s/^/     /; s/ *\(.\&#123;6,\&#125;\)\n/\1  /'</span></span><br></pre></td></tr></table></figure>
<h3 id="对文件中的所有行编号，但只显示非空白行的行号。"><a href="#对文件中的所有行编号，但只显示非空白行的行号。" class="headerlink" title="对文件中的所有行编号，但只显示非空白行的行号。"></a>对文件中的所有行编号，但只显示非空白行的行号。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/./='</span> filename | sed <span class="string">'/./N; s/\n/ /'</span></span><br></pre></td></tr></table></figure>
<h3 id="计算行数-（模拟-“wc-l”）"><a href="#计算行数-（模拟-“wc-l”）" class="headerlink" title="计算行数 （模拟 “wc -l”）"></a>计算行数 （模拟 “wc -l”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'$='</span></span><br></pre></td></tr></table></figure>
<h2 id="文本转换和替代："><a href="#文本转换和替代：" class="headerlink" title="文本转换和替代："></a>文本转换和替代：</h2><h3 id="Unix环境：转换DOS的新行符（CR-LF）为Unix格式。"><a href="#Unix环境：转换DOS的新行符（CR-LF）为Unix格式。" class="headerlink" title="Unix环境：转换DOS的新行符（CR/LF）为Unix格式。"></a>Unix环境：转换DOS的新行符（CR/LF）为Unix格式。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/.$//'</span>                    <span class="comment">## 假设所有行以CR/LF结束</span></span><br><span class="line">sed <span class="string">'s/^M$//'</span>                   <span class="comment">## 在bash/tcsh中，将按Ctrl-M改为按Ctrl-V</span></span><br><span class="line">sed <span class="string">'s/\x0D$//'</span>                 <span class="comment">## ssed、gsed 3.02.80，及更高版本</span></span><br></pre></td></tr></table></figure>
<h3 id="Unix环境：转换Unix的新行符（LF）为DOS格式。"><a href="#Unix环境：转换Unix的新行符（LF）为DOS格式。" class="headerlink" title="Unix环境：转换Unix的新行符（LF）为DOS格式。"></a>Unix环境：转换Unix的新行符（LF）为DOS格式。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">"s/$/`echo -e \\\r`/"</span>       <span class="comment">## 在ksh下所使用的命令</span></span><br><span class="line">sed <span class="string">'s/$'</span><span class="string">"/`echo \\\r`/"</span>        <span class="comment">## 在bash下所使用的命令</span></span><br><span class="line">sed <span class="string">"s/$/`echo \\\r`/"</span>          <span class="comment">## 在zsh下所使用的命令</span></span><br><span class="line">sed <span class="string">'s/$/\r/'</span>                   <span class="comment">## gsed 3.02.80 及更高版本</span></span><br></pre></td></tr></table></figure>
<h3 id="DOS环境：转换Unix新行符（LF）为DOS格式。"><a href="#DOS环境：转换Unix新行符（LF）为DOS格式。" class="headerlink" title="DOS环境：转换Unix新行符（LF）为DOS格式。"></a>DOS环境：转换Unix新行符（LF）为DOS格式。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">"s/$//"</span>                     <span class="comment">## 方法 1</span></span><br><span class="line">sed -n p                        <span class="comment">## 方法 2</span></span><br></pre></td></tr></table></figure>
<h3 id="DOS环境：转换DOS新行符（CR-LF）为Unix格式。下面的脚本只对UnxUtils-sed-4-0-7-及更高版本有效。要识别UnxUtils版本的-sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。"><a href="#DOS环境：转换DOS新行符（CR-LF）为Unix格式。下面的脚本只对UnxUtils-sed-4-0-7-及更高版本有效。要识别UnxUtils版本的-sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。" class="headerlink" title="DOS环境：转换DOS新行符（CR/LF）为Unix格式。下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的 sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。"></a>DOS环境：转换DOS新行符（CR/LF）为Unix格式。下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的 sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">"s/\r//"</span> infile &gt;outfile    <span class="comment">## UnxUtils sed v4.0.7 或更高版本</span></span><br><span class="line">tr -d \r &lt;infile &gt;outfile       <span class="comment">## GNU tr 1.22 或更高版本</span></span><br></pre></td></tr></table></figure>
<h3 id="将每一行前导的“空白字符”（空格，制表符）删除使之左对齐"><a href="#将每一行前导的“空白字符”（空格，制表符）删除使之左对齐" class="headerlink" title="将每一行前导的“空白字符”（空格，制表符）删除使之左对齐"></a>将每一行前导的“空白字符”（空格，制表符）删除使之左对齐</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/^[ \t]*//'</span>               <span class="comment">## 见本文末尾关于'\t'用法的描述</span></span><br></pre></td></tr></table></figure>
<h3 id="将每一行拖尾的“空白字符”（空格，制表符）删除"><a href="#将每一行拖尾的“空白字符”（空格，制表符）删除" class="headerlink" title="将每一行拖尾的“空白字符”（空格，制表符）删除"></a>将每一行拖尾的“空白字符”（空格，制表符）删除</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/[ \t]*$//'</span>               <span class="comment">## 见本文末尾关于'\t'用法的描述</span></span><br></pre></td></tr></table></figure>
<h3 id="将每一行中的前导和拖尾的空白字符删除"><a href="#将每一行中的前导和拖尾的空白字符删除" class="headerlink" title="将每一行中的前导和拖尾的空白字符删除"></a>将每一行中的前导和拖尾的空白字符删除</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/^[ \t]*//;s/[ \t]*$//'</span></span><br></pre></td></tr></table></figure>
<h3 id="在每一行开头处插入5个空格（使全文向右移动5个字符的位置）"><a href="#在每一行开头处插入5个空格（使全文向右移动5个字符的位置）" class="headerlink" title="在每一行开头处插入5个空格（使全文向右移动5个字符的位置）"></a>在每一行开头处插入5个空格（使全文向右移动5个字符的位置）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/^/     /'</span></span><br></pre></td></tr></table></figure>
<h3 id="以79个字符为宽度，将所有文本右对齐"><a href="#以79个字符为宽度，将所有文本右对齐" class="headerlink" title="以79个字符为宽度，将所有文本右对齐"></a>以79个字符为宽度，将所有文本右对齐</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'s/^.\&#123;1,78\&#125;$/ &amp;/;ta'</span> <span class="comment">## 78个字符外加最后的一个空格</span></span><br></pre></td></tr></table></figure>
<h3 id="以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。-在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。"><a href="#以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。-在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。" class="headerlink" title="以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。"></a>以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed  -e :a -e <span class="string">'s/^.\&#123;1,77\&#125;$/ &amp; /;ta'</span>                    <span class="comment">## 方法1</span></span><br><span class="line">sed  -e :a -e <span class="string">'s/^.\&#123;1,77\&#125;$/ &amp;/;ta'</span> -e <span class="string">'s/\( *\)\1/\1/'</span> <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”"><a href="#在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”" class="headerlink" title="在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”"></a>在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/foo/bar/'</span>                <span class="comment">## 只替换每一行中的第一个“foo”字串</span></span><br><span class="line">sed <span class="string">'s/foo/bar/4'</span>               <span class="comment">## 只替换每一行中的第四个“foo”字串</span></span><br><span class="line">sed <span class="string">'s/foo/bar/g'</span>               <span class="comment">## 将每一行中的所有“foo”都换成“bar”</span></span><br><span class="line">sed <span class="string">'s/\(.*\)foo\(.*foo\)/\1bar\2/'</span><span class="comment">## 替换倒数第二个“foo”</span></span><br><span class="line">sed <span class="string">'s/\(.*\)foo/\1bar/'</span>           <span class="comment">## 替换最后一个“foo”</span></span><br></pre></td></tr></table></figure>
<h3 id="只在行中出现字串“baz”的情况下将“foo”替换成“bar”"><a href="#只在行中出现字串“baz”的情况下将“foo”替换成“bar”" class="headerlink" title="只在行中出现字串“baz”的情况下将“foo”替换成“bar”"></a>只在行中出现字串“baz”的情况下将“foo”替换成“bar”</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/baz/s/foo/bar/g'</span></span><br></pre></td></tr></table></figure>
<h3 id="将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换"><a href="#将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换" class="headerlink" title="将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换"></a>将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/baz/!s/foo/bar/g'</span></span><br></pre></td></tr></table></figure>
<h3 id="不管是“scarlet”“ruby”还是“puce”，一律换成“red”"><a href="#不管是“scarlet”“ruby”还是“puce”，一律换成“red”" class="headerlink" title="不管是“scarlet”“ruby”还是“puce”，一律换成“red”"></a>不管是“scarlet”“ruby”还是“puce”，一律换成“red”</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/scarlet/red/g;s/ruby/red/g;s/puce/red/g'</span>  <span class="comment">#对多数的sed都有效</span></span><br><span class="line">gsed <span class="string">'s/scarlet\|ruby\|puce/red/g'</span>              <span class="comment">## 只对GNU sed有效</span></span><br></pre></td></tr></table></figure>
<h2 id="倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。"><a href="#倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。" class="headerlink" title="倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。"></a>倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。</h2><h2 id="由于某些原因，使用下面命令时HHsed-v1-5会将文件中的空行删除"><a href="#由于某些原因，使用下面命令时HHsed-v1-5会将文件中的空行删除" class="headerlink" title="由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除"></a>由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'1!G;h;$!d'</span>              <span class="comment">## 方法1</span></span><br><span class="line">sed -n <span class="string">'1!G;h;$p'</span>            <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）"><a href="#将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）" class="headerlink" title="将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）"></a>将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/\n/!G;s/\(.\)\(.*\n\)/&amp;\2\1/;//D;s/.//'</span></span><br></pre></td></tr></table></figure>
<h3 id="将每两行连接成一行（类似“paste”）"><a href="#将每两行连接成一行（类似“paste”）" class="headerlink" title="将每两行连接成一行（类似“paste”）"></a>将每两行连接成一行（类似“paste”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$!N;s/\n/ /'</span></span><br></pre></td></tr></table></figure>
<h3 id="如果当前行以反斜杠“-”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠"><a href="#如果当前行以反斜杠“-”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠" class="headerlink" title="如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠"></a>如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'/\\$/N; s/\\\n//; ta'</span></span><br></pre></td></tr></table></figure>
<h3 id="如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“-”"><a href="#如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“-”" class="headerlink" title="如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“=”"></a>如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“=”</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'$!N;s/\n=/ /;ta'</span> -e <span class="string">'P;D'</span></span><br></pre></td></tr></table></figure>
<h3 id="为数字字串增加逗号分隔符号，将“1234567”改为“1-234-567”"><a href="#为数字字串增加逗号分隔符号，将“1234567”改为“1-234-567”" class="headerlink" title="为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”"></a>为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsed <span class="string">':a;s/\B[0-9]\&#123;3\&#125;\&gt;/,&amp;/;ta'</span>                    <span class="comment">## GNU sed</span></span><br><span class="line">sed -e :a -e <span class="string">'s/\(.*[0-9]\)\([0-9]\&#123;3\&#125;\)/\1,\2/;ta'</span> <span class="comment">## 其他sed</span></span><br></pre></td></tr></table></figure>
<h3 id="为带有小数点和负号的数值增加逗号分隔符（GNU-sed）"><a href="#为带有小数点和负号的数值增加逗号分隔符（GNU-sed）" class="headerlink" title="为带有小数点和负号的数值增加逗号分隔符（GNU sed）"></a>为带有小数点和负号的数值增加逗号分隔符（GNU sed）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsed -r <span class="string">':a;s/(^|[^0-9.])([0-9]+)([0-9]&#123;3&#125;)/\1\2,\3/g;ta'</span></span><br></pre></td></tr></table></figure>
<h3 id="在每5行后增加一空白行-（在第5，10，15，20，等行后增加一空白行）"><a href="#在每5行后增加一空白行-（在第5，10，15，20，等行后增加一空白行）" class="headerlink" title="在每5行后增加一空白行 （在第5，10，15，20，等行后增加一空白行）"></a>在每5行后增加一空白行 （在第5，10，15，20，等行后增加一空白行）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsed <span class="string">'0~5G'</span>                     <span class="comment">## 只对GNU sed有效</span></span><br><span class="line">sed <span class="string">'n;n;n;n;G;'</span>                <span class="comment">## 其他sed</span></span><br></pre></td></tr></table></figure>
<h2 id="选择性地显示特定行："><a href="#选择性地显示特定行：" class="headerlink" title="选择性地显示特定行："></a>选择性地显示特定行：</h2><h3 id="显示文件中的前10行-（模拟“head”的行为）"><a href="#显示文件中的前10行-（模拟“head”的行为）" class="headerlink" title="显示文件中的前10行 （模拟“head”的行为）"></a>显示文件中的前10行 （模拟“head”的行为）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed 10q</span><br></pre></td></tr></table></figure>
<h3 id="显示文件中的第一行-（模拟“head-1”命令）"><a href="#显示文件中的第一行-（模拟“head-1”命令）" class="headerlink" title="显示文件中的第一行 （模拟“head -1”命令）"></a>显示文件中的第一行 （模拟“head -1”命令）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed q</span><br></pre></td></tr></table></figure>
<h3 id="显示文件中的最后10行-（模拟“tail”）"><a href="#显示文件中的最后10行-（模拟“tail”）" class="headerlink" title="显示文件中的最后10行 （模拟“tail”）"></a>显示文件中的最后10行 （模拟“tail”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'$q;N;11,$D;ba'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示文件中的最后2行（模拟“tail-2”命令）"><a href="#显示文件中的最后2行（模拟“tail-2”命令）" class="headerlink" title="显示文件中的最后2行（模拟“tail -2”命令）"></a>显示文件中的最后2行（模拟“tail -2”命令）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$!N;$!D'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示文件中的最后一行（模拟“tail-1”）"><a href="#显示文件中的最后一行（模拟“tail-1”）" class="headerlink" title="显示文件中的最后一行（模拟“tail -1”）"></a>显示文件中的最后一行（模拟“tail -1”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$!d'</span>                       <span class="comment">## 方法1</span></span><br><span class="line">sed -n <span class="string">'$p'</span>                     <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="显示文件中的倒数第二行"><a href="#显示文件中的倒数第二行" class="headerlink" title="显示文件中的倒数第二行"></a>显示文件中的倒数第二行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'$!&#123;h;d;&#125;'</span> -e x             <span class="comment">## 当文件中只有一行时，输入空行</span></span><br><span class="line">sed -e <span class="string">'1&#123;$q;&#125;'</span> -e <span class="string">'$!&#123;h;d;&#125;'</span> -e x <span class="comment">## 当文件中只有一行时，显示该行</span></span><br><span class="line">sed -e <span class="string">'1&#123;$d;&#125;'</span> -e <span class="string">'$!&#123;h;d;&#125;'</span> -e x <span class="comment">## 当文件中只有一行时，不输出</span></span><br></pre></td></tr></table></figure>
<h3 id="只显示匹配正则表达式的行（模拟“grep”）"><a href="#只显示匹配正则表达式的行（模拟“grep”）" class="headerlink" title="只显示匹配正则表达式的行（模拟“grep”）"></a>只显示匹配正则表达式的行（模拟“grep”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/regexp/p'</span>              <span class="comment">## 方法1</span></span><br><span class="line">sed <span class="string">'/regexp/!d'</span>                <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="只显示“不”匹配正则表达式的行（模拟“grep-v”）"><a href="#只显示“不”匹配正则表达式的行（模拟“grep-v”）" class="headerlink" title="只显示“不”匹配正则表达式的行（模拟“grep -v”）"></a>只显示“不”匹配正则表达式的行（模拟“grep -v”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/regexp/!p'</span>             <span class="comment">## 方法1，与前面的命令相对应</span></span><br><span class="line">sed <span class="string">'/regexp/d'</span>                 <span class="comment">## 方法2，类似的语法</span></span><br></pre></td></tr></table></figure>
<h3 id="查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行"><a href="#查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行" class="headerlink" title="查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行"></a>查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/regexp/&#123;g;1!p;&#125;;h'</span></span><br></pre></td></tr></table></figure>
<h3 id="查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行"><a href="#查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行" class="headerlink" title="查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行"></a>查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/regexp/&#123;n;p;&#125;'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号-（类似“grep-A1-B1”）"><a href="#显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号-（类似“grep-A1-B1”）" class="headerlink" title="显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号 （类似“grep -A1 -B1”）"></a>显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号 （类似“grep -A1 -B1”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e <span class="string">'/regexp/&#123;=;x;1!p;g;$!N;p;D;&#125;'</span> -e h</span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”、“BBB”或“CCC”的行（任意次序）"><a href="#显示包含“AAA”、“BBB”或“CCC”的行（任意次序）" class="headerlink" title="显示包含“AAA”、“BBB”或“CCC”的行（任意次序）"></a>显示包含“AAA”、“BBB”或“CCC”的行（任意次序）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/AAA/!d; /BBB/!d; /CCC/!d'</span> <span class="comment">## 字串的次序不影响结果</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”、“BBB”和“CCC”的行（固定次序）"><a href="#显示包含“AAA”、“BBB”和“CCC”的行（固定次序）" class="headerlink" title="显示包含“AAA”、“BBB”和“CCC”的行（固定次序）"></a>显示包含“AAA”、“BBB”和“CCC”的行（固定次序）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/AAA.*BBB.*CCC/!d'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”“BBB”或“CCC”的行-（模拟“egrep”）"><a href="#显示包含“AAA”“BBB”或“CCC”的行-（模拟“egrep”）" class="headerlink" title="显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）"></a>显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'/AAA/b'</span> -e <span class="string">'/BBB/b'</span> -e <span class="string">'/CCC/b'</span> -e d   <span class="comment">## 多数sed</span></span><br><span class="line">gsed <span class="string">'/AAA\|BBB\|CCC/!d'</span>                       <span class="comment">## 对GNU sed有效</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”的段落-（段落间以空行分隔）HHsed-v1-5-必须在“x-”后加入“G-”，接下来的3个脚本都是这样"><a href="#显示包含“AAA”的段落-（段落间以空行分隔）HHsed-v1-5-必须在“x-”后加入“G-”，接下来的3个脚本都是这样" class="headerlink" title="显示包含“AAA”的段落 （段落间以空行分隔）HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样"></a>显示包含“AAA”的段落 （段落间以空行分隔）HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'/./&#123;H;$!d;&#125;'</span> -e <span class="string">'x;/AAA/!d;'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”“BBB”和“CCC”三个字串的段落-（任意次序）"><a href="#显示包含“AAA”“BBB”和“CCC”三个字串的段落-（任意次序）" class="headerlink" title="显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）"></a>显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'/./&#123;H;$!d;&#125;'</span> -e <span class="string">'x;/AAA/!d;/BBB/!d;/CCC/!d'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落-（任意次序）"><a href="#显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落-（任意次序）" class="headerlink" title="显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落 （任意次序）"></a>显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落 （任意次序）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'/./&#123;H;$!d;&#125;'</span> -e <span class="string">'x;/AAA/b'</span> -e <span class="string">'/BBB/b'</span> -e <span class="string">'/CCC/b'</span> -e d</span><br><span class="line">gsed <span class="string">'/./&#123;H;$!d;&#125;;x;/AAA\|BBB\|CCC/b;d'</span>        <span class="comment">## 只对GNU sed有效</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含65个或以上字符的行"><a href="#显示包含65个或以上字符的行" class="headerlink" title="显示包含65个或以上字符的行"></a>显示包含65个或以上字符的行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/^.\&#123;65\&#125;/p'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示包含65个以下字符的行"><a href="#显示包含65个以下字符的行" class="headerlink" title="显示包含65个以下字符的行"></a>显示包含65个以下字符的行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/^.\&#123;65\&#125;/!p'</span>           <span class="comment">## 方法1，与上面的脚本相对应</span></span><br><span class="line">sed <span class="string">'/^.\&#123;65\&#125;/d'</span>               <span class="comment">## 方法2，更简便一点的方法</span></span><br></pre></td></tr></table></figure>
<h3 id="显示部分文本——从包含正则表达式的行开始到最后一行结束"><a href="#显示部分文本——从包含正则表达式的行开始到最后一行结束" class="headerlink" title="显示部分文本——从包含正则表达式的行开始到最后一行结束"></a>显示部分文本——从包含正则表达式的行开始到最后一行结束</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/regexp/,$p'</span></span><br></pre></td></tr></table></figure>
<h3 id="显示部分文本——指定行号范围（从第8至第12行，含8和12行）"><a href="#显示部分文本——指定行号范围（从第8至第12行，含8和12行）" class="headerlink" title="显示部分文本——指定行号范围（从第8至第12行，含8和12行）"></a>显示部分文本——指定行号范围（从第8至第12行，含8和12行）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'8,12p'</span>                  <span class="comment">## 方法1</span></span><br><span class="line">sed <span class="string">'8,12!d'</span>                    <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="显示第52行"><a href="#显示第52行" class="headerlink" title="显示第52行"></a>显示第52行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'52p'</span>                    <span class="comment">## 方法1</span></span><br><span class="line">sed <span class="string">'52!d'</span>                      <span class="comment">## 方法2</span></span><br><span class="line">sed <span class="string">'52q;d'</span>                     <span class="comment">## 方法3, 处理大文件时更有效率</span></span><br></pre></td></tr></table></figure>
<h3 id="从第3行开始，每7行显示一次"><a href="#从第3行开始，每7行显示一次" class="headerlink" title="从第3行开始，每7行显示一次"></a>从第3行开始，每7行显示一次</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsed -n <span class="string">'3~7p'</span>                  <span class="comment">## 只对GNU sed有效</span></span><br><span class="line">sed -n <span class="string">'3,$&#123;p;n;n;n;n;n;n;&#125;'</span>    <span class="comment">## 其他sed</span></span><br></pre></td></tr></table></figure>
<h3 id="显示两个正则表达式之间的文本（包含）"><a href="#显示两个正则表达式之间的文本（包含）" class="headerlink" title="显示两个正则表达式之间的文本（包含）"></a>显示两个正则表达式之间的文本（包含）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/Iowa/,/Montana/p'</span>      <span class="comment">## 区分大小写方式</span></span><br></pre></td></tr></table></figure>
<h2 id="选择性地删除特定行："><a href="#选择性地删除特定行：" class="headerlink" title="选择性地删除特定行："></a>选择性地删除特定行：</h2><h3 id="显示通篇文档，除了两个正则表达式之间的内容"><a href="#显示通篇文档，除了两个正则表达式之间的内容" class="headerlink" title="显示通篇文档，除了两个正则表达式之间的内容"></a>显示通篇文档，除了两个正则表达式之间的内容</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/Iowa/,/Montana/d'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除"><a href="#删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除" class="headerlink" title="删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除"></a>删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$!N; /^\(.*\)\n\1$/!P; D'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中的重复行，不管有无相邻。注意hold-space所能支持的缓存大小，或者使用GNU-sed。"><a href="#删除文件中的重复行，不管有无相邻。注意hold-space所能支持的缓存大小，或者使用GNU-sed。" class="headerlink" title="删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存大小，或者使用GNU sed。"></a>删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存大小，或者使用GNU sed。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'G; s/\n/&amp;&amp;/; /^\([ -~]*\n\).*\n\1/d; s/\n//; h; P'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除除重复行外的所有行（模拟“uniq-d”）"><a href="#删除除重复行外的所有行（模拟“uniq-d”）" class="headerlink" title="删除除重复行外的所有行（模拟“uniq -d”）"></a>删除除重复行外的所有行（模拟“uniq -d”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$!N; s/^\(.*\)\n\1$/\1/; t; D'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中开头的10行"><a href="#删除文件中开头的10行" class="headerlink" title="删除文件中开头的10行"></a>删除文件中开头的10行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'1,10d'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中的最后一行"><a href="#删除文件中的最后一行" class="headerlink" title="删除文件中的最后一行"></a>删除文件中的最后一行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'$d'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中的最后两行"><a href="#删除文件中的最后两行" class="headerlink" title="删除文件中的最后两行"></a>删除文件中的最后两行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'N;$!P;$!D;$d'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中的最后10行"><a href="#删除文件中的最后10行" class="headerlink" title="删除文件中的最后10行"></a>删除文件中的最后10行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'$d;N;2,10ba'</span> -e <span class="string">'P;D'</span>  <span class="comment">## 方法1</span></span><br><span class="line">sed -n -e :a -e <span class="string">'1,10!&#123;P;N;D;&#125;;N;ba'</span> <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="删除8的倍数行"><a href="#删除8的倍数行" class="headerlink" title="删除8的倍数行"></a>删除8的倍数行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsed <span class="string">'0~8d'</span>                          <span class="comment">## 只对GNU sed有效</span></span><br><span class="line">sed <span class="string">'n;n;n;n;n;n;n;d;'</span>               <span class="comment">## 其他sed</span></span><br></pre></td></tr></table></figure>
<h3 id="删除匹配式样的行"><a href="#删除匹配式样的行" class="headerlink" title="删除匹配式样的行"></a>删除匹配式样的行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/pattern/d'</span>                     <span class="comment">## 删除含pattern的行。当然pattern可以换成任何有效的正则表达式</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件中的所有空行（与“grep-‘-’-”效果相同）"><a href="#删除文件中的所有空行（与“grep-‘-’-”效果相同）" class="headerlink" title="删除文件中的所有空行（与“grep ‘.’ ”效果相同）"></a>删除文件中的所有空行（与“grep ‘.’ ”效果相同）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^$/d'</span>                          <span class="comment">## 方法1</span></span><br><span class="line">sed <span class="string">'/./!d'</span>                          <span class="comment">## 方法2</span></span><br></pre></td></tr></table></figure>
<h3 id="只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat-s”）"><a href="#只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat-s”）" class="headerlink" title="只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat -s”）"></a>只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat -s”）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/./,/^$/!d'</span>        <span class="comment">#方法1，删除文件顶部的空行，允许尾部保留一空行</span></span><br><span class="line">sed <span class="string">'/^$/N;/\n$/D'</span>      <span class="comment">#方法2，允许顶部保留一空行，尾部不留空行</span></span><br></pre></td></tr></table></figure>
<h3 id="只保留多个相邻空行的前两行。"><a href="#只保留多个相邻空行的前两行。" class="headerlink" title="只保留多个相邻空行的前两行。"></a>只保留多个相邻空行的前两行。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^$/N;/\n$/N;//D'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件顶部的所有空行"><a href="#删除文件顶部的所有空行" class="headerlink" title="删除文件顶部的所有空行"></a>删除文件顶部的所有空行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/./,$!d'</span></span><br></pre></td></tr></table></figure>
<h3 id="删除文件尾部的所有空行"><a href="#删除文件尾部的所有空行" class="headerlink" title="删除文件尾部的所有空行"></a>删除文件尾部的所有空行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'/^\n*$/&#123;$d;N;ba'</span> -e <span class="string">'&#125;'</span> <span class="comment">## 对所有sed有效</span></span><br><span class="line">sed -e :a -e <span class="string">'/^\n*$/N;/\n$/ba'</span>       <span class="comment">## 同上，但只对 gsed 3.02.*有效</span></span><br></pre></td></tr></table></figure>
<h3 id="删除每个段落的最后一行"><a href="#删除每个段落的最后一行" class="headerlink" title="删除每个段落的最后一行"></a>删除每个段落的最后一行</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/^$/&#123;p;h;&#125;;/./&#123;x;/./p;&#125;'</span></span><br></pre></td></tr></table></figure>
<h2 id="特殊应用："><a href="#特殊应用：" class="headerlink" title="特殊应用："></a>特殊应用：</h2><h3 id="移除手册页（man-page）中的nroff标记。在Unix-System-V或bash-shell下使用’echo’命令时可能需要加上-e-选项。"><a href="#移除手册页（man-page）中的nroff标记。在Unix-System-V或bash-shell下使用’echo’命令时可能需要加上-e-选项。" class="headerlink" title="移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使用’echo’命令时可能需要加上 -e 选项。"></a>移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使用’echo’命令时可能需要加上 -e 选项。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> sed <span class="string">"s/.`echo \\\b`//g"</span>   <span class="comment">## 外层的双括号是必须的（Unix环境）</span></span><br><span class="line"> sed <span class="string">'s/.^H//g'</span>            <span class="comment">## 在bash或tcsh中, 按 Ctrl-V 再按 Ctrl-H</span></span><br><span class="line"> sed <span class="string">'s/.\x08//g'</span>          <span class="comment">## sed 1.5，GNU sed，ssed所使用的十六进制的表示方法</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<h3 id="提取新闻组或-e-mail-的邮件头"><a href="#提取新闻组或-e-mail-的邮件头" class="headerlink" title="提取新闻组或 e-mail 的邮件头"></a>提取新闻组或 e-mail 的邮件头</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^$/q'</span>               <span class="comment">## 删除第一行空行后的所有内容</span></span><br></pre></td></tr></table></figure>
<h3 id="提取新闻组或-e-mail-的正文部分"><a href="#提取新闻组或-e-mail-的正文部分" class="headerlink" title="提取新闻组或 e-mail 的正文部分"></a>提取新闻组或 e-mail 的正文部分</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'1,/^$/d'</span>             <span class="comment">## 删除第一行空行之前的所有内容</span></span><br></pre></td></tr></table></figure>
<h3 id="从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject-”字样"><a href="#从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject-”字样" class="headerlink" title="从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样"></a>从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^Subject: */!d; s///;q'</span></span><br></pre></td></tr></table></figure>
<h3 id="从邮件头获得回复地址"><a href="#从邮件头获得回复地址" class="headerlink" title="从邮件头获得回复地址"></a>从邮件头获得回复地址</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^Reply-To:/q; /^From:/h; /./d;g;q'</span></span><br></pre></td></tr></table></figure>
<h3 id="获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）"><a href="#获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）" class="headerlink" title="获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）"></a>获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/ *(.*)//; s/&gt;.*//; s/.*[:&lt;] *//'</span></span><br></pre></td></tr></table></figure>
<h3 id="在每一行开头加上一个尖括号和空格（引用信息）"><a href="#在每一行开头加上一个尖括号和空格（引用信息）" class="headerlink" title="在每一行开头加上一个尖括号和空格（引用信息）"></a>在每一行开头加上一个尖括号和空格（引用信息）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/^/&gt; /'</span></span><br></pre></td></tr></table></figure>
<h3 id="将每一行开头处的尖括号和空格删除（解除引用）"><a href="#将每一行开头处的尖括号和空格删除（解除引用）" class="headerlink" title="将每一行开头处的尖括号和空格删除（解除引用）"></a>将每一行开头处的尖括号和空格删除（解除引用）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/^&gt; //'</span></span><br></pre></td></tr></table></figure>
<h3 id="移除大部分的HTML标签（包括跨行标签）"><a href="#移除大部分的HTML标签（包括跨行标签）" class="headerlink" title="移除大部分的HTML标签（包括跨行标签）"></a>移除大部分的HTML标签（包括跨行标签）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e :a -e <span class="string">'s/&lt;[^&gt;]*&gt;//g;/&lt;/N;//ba'</span></span><br></pre></td></tr></table></figure>
<h3 id="将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul-Dhesi的一-个脚本修改而来。）"><a href="#将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul-Dhesi的一-个脚本修改而来。）" class="headerlink" title="将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一 个脚本修改而来。）"></a>将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一 个脚本修改而来。）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^end/,/^begin/d'</span> file1 file2 ... fileX | uudecode  <span class="comment">## vers. 1</span></span><br><span class="line">sed <span class="string">'/^end/,/^begin/d'</span> <span class="string">"<span class="variable">$@</span>"</span> | uudecode                   <span class="comment">## vers. 2</span></span><br></pre></td></tr></table></figure>
<h3 id="将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU-sed使用字元“-v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。"><a href="#将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU-sed使用字元“-v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。" class="headerlink" title="将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。"></a>将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/./&#123;H;d;&#125;;x;s/\n/=&#123;NL&#125;=/g'</span> file | sort | sed <span class="string">'1s/=&#123;NL&#125;=//;s/=&#123;NL&#125;=/\n/g'</span></span><br><span class="line">gsed <span class="string">'/./&#123;H;d&#125;;x;y/\n/\v/'</span> file | sort | sed <span class="string">'1s/\v//;y/\v/\n/'</span></span><br></pre></td></tr></table></figure>
<h3 id="分别压缩每个-TXT文件，压缩后删除原来的文件并将压缩后的-ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir-b”-显示不带路径的文件名）。"><a href="#分别压缩每个-TXT文件，压缩后删除原来的文件并将压缩后的-ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir-b”-显示不带路径的文件名）。" class="headerlink" title="分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b” 显示不带路径的文件名）。"></a>分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b” 显示不带路径的文件名）。</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> @<span class="built_in">echo</span> off &gt;zipup.bat</span><br><span class="line">dir /b *.txt | sed <span class="string">"s/^\(.*\)\.TXT/pkzip -mo \1 \1.TXT/"</span> &gt;&gt;zipup.bat</span><br></pre></td></tr></table></figure>
<h3 id="使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。"><a href="#使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。" class="headerlink" title="使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。"></a>使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。</h3><p>当读入第一行输入后，sed对其应用所有的命令，然后将结果输出。接着再读入第二<br>行输入，对其应用所有的命令……并重复这个过程。上一个例子中sed由标准输入设<br>备（即命令解释器，通常是以管道输入的形式）获得输入。在命令行给出一个或多<br>个文件名作为参数时，这些文件取代标准输入设备成为sed的输入。sed的输出将被<br>送到标准输出（显示器）。因此：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat filename | sed <span class="string">'10q'</span>        <span class="comment">## 使用管道输入</span></span><br><span class="line">sed <span class="string">'10q'</span> filename              <span class="comment">## 同样效果，但不使用管道输入</span></span><br><span class="line">sed <span class="string">'10q'</span> filename &gt; newfile    <span class="comment">## 将输出转移（重定向）到磁盘上</span></span><br></pre></td></tr></table></figure></p>
<p>要了解sed命令的使用说明，包括如何通过脚本文件（而非从命令行）来使用这些命<br>令，请参阅《sed &amp; awk》第二版，作者Dale Dougherty和Arnold Robbins<br>（O’Reilly，1997；<a href="http://www.ora.com），《UNIX" target="_blank" rel="noopener">http://www.ora.com），《UNIX</a> Text Processing》，作者<br>Dale Dougherty和Tim O’Reilly（Hayden Books，1987）或者是Mike Arst写的教<br>程——压缩包的名称是“U-SEDIT2.ZIP”（在许多站点上都找得到）。要发掘sed<br>的潜力，则必须对“正则表达式”有足够的理解。正则表达式的资料可以看<br>《Mastering Regular Expressions》作者Jeffrey Friedl（O’reilly 1997）。<br>Unix系统所提供的手册页（“man”）也会有所帮助（试一下这些命令<br>“man sed”、“man regexp”，或者看“man ed”中关于正则表达式的部分），但<br>手册提供的信息比较“抽象”——这也是它一直为人所诟病的。不过，它本来就不<br>是用来教初学者如何使用sed或正则表达式的教材，而只是为那些熟悉这些工具的人<br>提供的一些文本参考。</p>
<p>括号语法：前面的例子对sed命令基本上都使用单引号（’…’）而非双引号<br>（”…”）这是因为sed通常是在Unix平台上使用。单引号下，Unix的shell（命令<br>解释器）不会对美元符（$）和后引号（<code>...</code>）进行解释和执行。而在双引号下<br>美元符会被展开为变量或参数的值，后引号中的命令被执行并以输出的结果代替<br>后引号中的内容。而在“csh”及其衍生的shell中使用感叹号（!）时需要在其前<br>面加上转义用的反斜杠（就像这样：!）以保证上面所使用的例子能正常运行<br>（包括使用单引号的情况下）。DOS版本的Sed则一律使用双引号（”…”）而不是<br>引号来圈起命令。</p>
<p>‘\t’的用法：为了使本文保持行文简洁，我们在脚本中使用’\t’来表示一个制表<br>符。但是现在大部分版本的sed还不能识别’\t’的简写方式，因此当在命令行中为<br>脚本输入制表符时，你应该直接按TAB键来输入制表符而不是输入’\t’。下列的工<br>具软件都支持’\t’做为一个正则表达式的字元来表示制表符：awk、perl、HHsed、<br>sedmod以及GNU sed v3.02.80。</p>
<p>不同版本的SED：不同的版本间的sed会有些不同之处，可以想象它们之间在语法上<br>会有差异。具体而言，它们中大部分不支持在编辑命令中间使用标签（:name）或分<br>支命令（b,t），除非是放在那些的末尾。这篇文档中我们尽量选用了可移植性较高<br>的语法，以使大多数版本的sed的用户都能使用这些脚本。不过GNU版本的sed允许使<br>用更简洁的语法。想像一下当读者看到一个很长的命令时的心情：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'/AAA/b'</span> -e <span class="string">'/BBB/b'</span> -e <span class="string">'/CCC/b'</span> -e d</span><br></pre></td></tr></table></figure></p>
<p>好消息是GNU sed能让命令更紧凑：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/AAA/b;/BBB/b;/CCC/b;d'</span>     <span class="comment">## 甚至可以写成</span></span><br><span class="line">sed <span class="string">'/AAA\|BBB\|CCC/b;d'</span></span><br></pre></td></tr></table></figure></p>
<p>此外，请注意虽然许多版本的sed接受象“/one/ s/RE1/RE2/”这种在’s’前带有空<br>格的命令，但这些版本中有些却不接受这样的命令:“/one/! s/RE1/RE2/”。这时<br>只需要把中间的空格去掉就行了。</p>
<p>速度优化：当由于某种原因（比如输入文件较大、处理器或硬盘较慢等）需要提高<br>命令执行速度时，可以考虑在替换命令（“s/…/…/”）前面加上地址表达式来<br>提高速度。举例来说：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/foo/bar/g'</span> filename        <span class="comment">## 标准替换命令</span></span><br><span class="line">sed <span class="string">'/foo/ s/foo/bar/g'</span> filename  <span class="comment">## 速度更快</span></span><br><span class="line">sed <span class="string">'/foo/ s//bar/g'</span> filename     <span class="comment">## 简写形式</span></span><br></pre></td></tr></table></figure></p>
<p>当只需要显示文件的前面的部分或需要删除后面的内容时，可以在脚本中使用“q”<br>命令（退出命令）。在处理大的文件时，这会节省大量时间。因此：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'45,50p'</span> filename          <span class="comment">## 显示第45到50行</span></span><br><span class="line">sed -n <span class="string">'51q;45,50p'</span> filename      <span class="comment">## 一样，但快得多</span></span><br></pre></td></tr></table></figure></p>
<p>如果你有其他的单行脚本想与大家分享或者你发现了本文档中错误的地方，请发电<br>子邮件给本文档的作者（Eric Pement）。邮件中请记得提供你所使用的sed版本、<br>该sed所运行的操作系统及对问题的适当描述。本文所指的单行脚本指命令行的长<br>度在65个字符或65个以下的sed脚本〔译注1〕。本文档的各种脚本是由以下所列作<br>者所写或提供：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Al Aab                              <span class="comment">## 建立了“seders”邮件列表</span></span><br><span class="line">Edgar Allen                         <span class="comment">## 许多方面</span></span><br><span class="line">Yiorgos Adamopoulos                 <span class="comment">## 许多方面</span></span><br><span class="line">Dale Dougherty                      <span class="comment">## 《sed &amp; awk》作者</span></span><br><span class="line">Carlos Duarte                       <span class="comment">## 《do it with sed》作者</span></span><br><span class="line">Eric Pement                         <span class="comment">## 本文档的作者</span></span><br><span class="line">Ken Pizzini                         <span class="comment">## GNU sed v3.02 的作者</span></span><br><span class="line">S.G. Ravenhall                      <span class="comment">## 去html标签脚本</span></span><br><span class="line">Greg Ubben                          <span class="comment">## 有诸多贡献并提供了许多帮助</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p>译注1：大部分情况下，sed脚本无论多长都能写成单行的形式（通过<code>-e&#39;选项和</code>;’<br>号）——只要命令解释器支持，所以这里说的单行脚本除了能写成一行还对长度有<br>所限制。因为这些单行脚本的意义不在于它们是以单行的形式出现。而是让用户能<br>方便地在命令行中使用这些紧凑的脚本才是其意义所在。</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                    
                        <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SED单行脚本快速参考（Unix-流编辑器）"><span class="toc-number">1.</span> <span class="toc-text">SED单行脚本快速参考（Unix 流编辑器）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#文本间隔："><span class="toc-number">1.1.</span> <span class="toc-text">文本间隔：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在每一行后面增加一空行"><span class="toc-number">1.1.1.</span> <span class="toc-text">在每一行后面增加一空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。"><span class="toc-number">1.1.2.</span> <span class="toc-text">将原来的所有空行删除并在每一行后面增加一空行。这样在输出的文本中每一行后面将有且只有一空行。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每一行后面增加两行空行"><span class="toc-number">1.1.3.</span> <span class="toc-text">在每一行后面增加两行空行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#将第一个脚本所产生的所有空行删除（即删除所有偶数行）"><span class="toc-number">1.2.</span> <span class="toc-text">将第一个脚本所产生的所有空行删除（即删除所有偶数行）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在匹配式样“regex”的行之前插入一空行"><span class="toc-number">1.2.1.</span> <span class="toc-text">在匹配式样“regex”的行之前插入一空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在匹配式样“regex”的行之后插入一空行"><span class="toc-number">1.2.2.</span> <span class="toc-text">在匹配式样“regex”的行之后插入一空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在匹配式样“regex”的行之前和之后各插入一空行"><span class="toc-number">1.2.3.</span> <span class="toc-text">在匹配式样“regex”的行之前和之后各插入一空行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编号："><span class="toc-number">1.3.</span> <span class="toc-text">编号：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”"><span class="toc-number">1.3.1.</span> <span class="toc-text">为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（tab，见本文末尾关于’-t’的用法的描述）而不是空格来对齐边缘。"><span class="toc-number">1.3.2.</span> <span class="toc-text">（tab，见本文末尾关于’\t’的用法的描述）而不是空格来对齐边缘。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对文件中的所有行编号（行号在左，文字右端对齐）。"><span class="toc-number">1.3.3.</span> <span class="toc-text">对文件中的所有行编号（行号在左，文字右端对齐）。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对文件中的所有行编号，但只显示非空白行的行号。"><span class="toc-number">1.3.4.</span> <span class="toc-text">对文件中的所有行编号，但只显示非空白行的行号。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算行数-（模拟-“wc-l”）"><span class="toc-number">1.3.5.</span> <span class="toc-text">计算行数 （模拟 “wc -l”）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文本转换和替代："><span class="toc-number">1.4.</span> <span class="toc-text">文本转换和替代：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unix环境：转换DOS的新行符（CR-LF）为Unix格式。"><span class="toc-number">1.4.1.</span> <span class="toc-text">Unix环境：转换DOS的新行符（CR/LF）为Unix格式。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unix环境：转换Unix的新行符（LF）为DOS格式。"><span class="toc-number">1.4.2.</span> <span class="toc-text">Unix环境：转换Unix的新行符（LF）为DOS格式。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOS环境：转换Unix新行符（LF）为DOS格式。"><span class="toc-number">1.4.3.</span> <span class="toc-text">DOS环境：转换Unix新行符（LF）为DOS格式。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOS环境：转换DOS新行符（CR-LF）为Unix格式。下面的脚本只对UnxUtils-sed-4-0-7-及更高版本有效。要识别UnxUtils版本的-sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。"><span class="toc-number">1.4.4.</span> <span class="toc-text">DOS环境：转换DOS新行符（CR/LF）为Unix格式。下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的 sed可以通过其特有的“–text”选项。你可以使用帮助选项（“–help”）看其中有无一个“–text”项以此来判断所使用的是否是UnxUtils版本。其它DOS版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将每一行前导的“空白字符”（空格，制表符）删除使之左对齐"><span class="toc-number">1.4.5.</span> <span class="toc-text">将每一行前导的“空白字符”（空格，制表符）删除使之左对齐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将每一行拖尾的“空白字符”（空格，制表符）删除"><span class="toc-number">1.4.6.</span> <span class="toc-text">将每一行拖尾的“空白字符”（空格，制表符）删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将每一行中的前导和拖尾的空白字符删除"><span class="toc-number">1.4.7.</span> <span class="toc-text">将每一行中的前导和拖尾的空白字符删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每一行开头处插入5个空格（使全文向右移动5个字符的位置）"><span class="toc-number">1.4.8.</span> <span class="toc-text">在每一行开头处插入5个空格（使全文向右移动5个字符的位置）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以79个字符为宽度，将所有文本右对齐"><span class="toc-number">1.4.9.</span> <span class="toc-text">以79个字符为宽度，将所有文本右对齐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。-在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。"><span class="toc-number">1.4.10.</span> <span class="toc-text">以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”"><span class="toc-number">1.4.11.</span> <span class="toc-text">在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#只在行中出现字串“baz”的情况下将“foo”替换成“bar”"><span class="toc-number">1.4.12.</span> <span class="toc-text">只在行中出现字串“baz”的情况下将“foo”替换成“bar”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换"><span class="toc-number">1.4.13.</span> <span class="toc-text">将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不管是“scarlet”“ruby”还是“puce”，一律换成“red”"><span class="toc-number">1.4.14.</span> <span class="toc-text">不管是“scarlet”“ruby”还是“puce”，一律换成“red”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。"><span class="toc-number">1.5.</span> <span class="toc-text">倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#由于某些原因，使用下面命令时HHsed-v1-5会将文件中的空行删除"><span class="toc-number">1.6.</span> <span class="toc-text">由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）"><span class="toc-number">1.6.1.</span> <span class="toc-text">将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将每两行连接成一行（类似“paste”）"><span class="toc-number">1.6.2.</span> <span class="toc-text">将每两行连接成一行（类似“paste”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果当前行以反斜杠“-”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠"><span class="toc-number">1.6.3.</span> <span class="toc-text">如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾并去掉原来行尾的反斜杠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“-”"><span class="toc-number">1.6.4.</span> <span class="toc-text">如果当前行以等号开头，将当前行并到上一行末尾并以单个空格代替原来行头的“=”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为数字字串增加逗号分隔符号，将“1234567”改为“1-234-567”"><span class="toc-number">1.6.5.</span> <span class="toc-text">为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为带有小数点和负号的数值增加逗号分隔符（GNU-sed）"><span class="toc-number">1.6.6.</span> <span class="toc-text">为带有小数点和负号的数值增加逗号分隔符（GNU sed）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每5行后增加一空白行-（在第5，10，15，20，等行后增加一空白行）"><span class="toc-number">1.6.7.</span> <span class="toc-text">在每5行后增加一空白行 （在第5，10，15，20，等行后增加一空白行）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#选择性地显示特定行："><span class="toc-number">1.7.</span> <span class="toc-text">选择性地显示特定行：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的前10行-（模拟“head”的行为）"><span class="toc-number">1.7.1.</span> <span class="toc-text">显示文件中的前10行 （模拟“head”的行为）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的第一行-（模拟“head-1”命令）"><span class="toc-number">1.7.2.</span> <span class="toc-text">显示文件中的第一行 （模拟“head -1”命令）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的最后10行-（模拟“tail”）"><span class="toc-number">1.7.3.</span> <span class="toc-text">显示文件中的最后10行 （模拟“tail”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的最后2行（模拟“tail-2”命令）"><span class="toc-number">1.7.4.</span> <span class="toc-text">显示文件中的最后2行（模拟“tail -2”命令）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的最后一行（模拟“tail-1”）"><span class="toc-number">1.7.5.</span> <span class="toc-text">显示文件中的最后一行（模拟“tail -1”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示文件中的倒数第二行"><span class="toc-number">1.7.6.</span> <span class="toc-text">显示文件中的倒数第二行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#只显示匹配正则表达式的行（模拟“grep”）"><span class="toc-number">1.7.7.</span> <span class="toc-text">只显示匹配正则表达式的行（模拟“grep”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#只显示“不”匹配正则表达式的行（模拟“grep-v”）"><span class="toc-number">1.7.8.</span> <span class="toc-text">只显示“不”匹配正则表达式的行（模拟“grep -v”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行"><span class="toc-number">1.7.9.</span> <span class="toc-text">查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行"><span class="toc-number">1.7.10.</span> <span class="toc-text">查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号-（类似“grep-A1-B1”）"><span class="toc-number">1.7.11.</span> <span class="toc-text">显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所在行的行号 （类似“grep -A1 -B1”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”、“BBB”或“CCC”的行（任意次序）"><span class="toc-number">1.7.12.</span> <span class="toc-text">显示包含“AAA”、“BBB”或“CCC”的行（任意次序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”、“BBB”和“CCC”的行（固定次序）"><span class="toc-number">1.7.13.</span> <span class="toc-text">显示包含“AAA”、“BBB”和“CCC”的行（固定次序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”“BBB”或“CCC”的行-（模拟“egrep”）"><span class="toc-number">1.7.14.</span> <span class="toc-text">显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”的段落-（段落间以空行分隔）HHsed-v1-5-必须在“x-”后加入“G-”，接下来的3个脚本都是这样"><span class="toc-number">1.7.15.</span> <span class="toc-text">显示包含“AAA”的段落 （段落间以空行分隔）HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”“BBB”和“CCC”三个字串的段落-（任意次序）"><span class="toc-number">1.7.16.</span> <span class="toc-text">显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落-（任意次序）"><span class="toc-number">1.7.17.</span> <span class="toc-text">显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落 （任意次序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含65个或以上字符的行"><span class="toc-number">1.7.18.</span> <span class="toc-text">显示包含65个或以上字符的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示包含65个以下字符的行"><span class="toc-number">1.7.19.</span> <span class="toc-text">显示包含65个以下字符的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示部分文本——从包含正则表达式的行开始到最后一行结束"><span class="toc-number">1.7.20.</span> <span class="toc-text">显示部分文本——从包含正则表达式的行开始到最后一行结束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示部分文本——指定行号范围（从第8至第12行，含8和12行）"><span class="toc-number">1.7.21.</span> <span class="toc-text">显示部分文本——指定行号范围（从第8至第12行，含8和12行）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示第52行"><span class="toc-number">1.7.22.</span> <span class="toc-text">显示第52行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从第3行开始，每7行显示一次"><span class="toc-number">1.7.23.</span> <span class="toc-text">从第3行开始，每7行显示一次</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示两个正则表达式之间的文本（包含）"><span class="toc-number">1.7.24.</span> <span class="toc-text">显示两个正则表达式之间的文本（包含）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#选择性地删除特定行："><span class="toc-number">1.8.</span> <span class="toc-text">选择性地删除特定行：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#显示通篇文档，除了两个正则表达式之间的内容"><span class="toc-number">1.8.1.</span> <span class="toc-text">显示通篇文档，除了两个正则表达式之间的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除"><span class="toc-number">1.8.2.</span> <span class="toc-text">删除文件中相邻的重复行（模拟“uniq”）只保留重复行中的第一行，其他行删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中的重复行，不管有无相邻。注意hold-space所能支持的缓存大小，或者使用GNU-sed。"><span class="toc-number">1.8.3.</span> <span class="toc-text">删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存大小，或者使用GNU sed。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除除重复行外的所有行（模拟“uniq-d”）"><span class="toc-number">1.8.4.</span> <span class="toc-text">删除除重复行外的所有行（模拟“uniq -d”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中开头的10行"><span class="toc-number">1.8.5.</span> <span class="toc-text">删除文件中开头的10行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中的最后一行"><span class="toc-number">1.8.6.</span> <span class="toc-text">删除文件中的最后一行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中的最后两行"><span class="toc-number">1.8.7.</span> <span class="toc-text">删除文件中的最后两行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中的最后10行"><span class="toc-number">1.8.8.</span> <span class="toc-text">删除文件中的最后10行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除8的倍数行"><span class="toc-number">1.8.9.</span> <span class="toc-text">删除8的倍数行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除匹配式样的行"><span class="toc-number">1.8.10.</span> <span class="toc-text">删除匹配式样的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件中的所有空行（与“grep-‘-’-”效果相同）"><span class="toc-number">1.8.11.</span> <span class="toc-text">删除文件中的所有空行（与“grep ‘.’ ”效果相同）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat-s”）"><span class="toc-number">1.8.12.</span> <span class="toc-text">只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。（模拟“cat -s”）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#只保留多个相邻空行的前两行。"><span class="toc-number">1.8.13.</span> <span class="toc-text">只保留多个相邻空行的前两行。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件顶部的所有空行"><span class="toc-number">1.8.14.</span> <span class="toc-text">删除文件顶部的所有空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件尾部的所有空行"><span class="toc-number">1.8.15.</span> <span class="toc-text">删除文件尾部的所有空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除每个段落的最后一行"><span class="toc-number">1.8.16.</span> <span class="toc-text">删除每个段落的最后一行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊应用："><span class="toc-number">1.9.</span> <span class="toc-text">特殊应用：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#移除手册页（man-page）中的nroff标记。在Unix-System-V或bash-shell下使用’echo’命令时可能需要加上-e-选项。"><span class="toc-number">1.9.1.</span> <span class="toc-text">移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使用’echo’命令时可能需要加上 -e 选项。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提取新闻组或-e-mail-的邮件头"><span class="toc-number">1.9.2.</span> <span class="toc-text">提取新闻组或 e-mail 的邮件头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提取新闻组或-e-mail-的正文部分"><span class="toc-number">1.9.3.</span> <span class="toc-text">提取新闻组或 e-mail 的正文部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject-”字样"><span class="toc-number">1.9.4.</span> <span class="toc-text">从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从邮件头获得回复地址"><span class="toc-number">1.9.5.</span> <span class="toc-text">从邮件头获得回复地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）"><span class="toc-number">1.9.6.</span> <span class="toc-text">获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮地址的部分剃除。（见上一脚本）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每一行开头加上一个尖括号和空格（引用信息）"><span class="toc-number">1.9.7.</span> <span class="toc-text">在每一行开头加上一个尖括号和空格（引用信息）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将每一行开头处的尖括号和空格删除（解除引用）"><span class="toc-number">1.9.8.</span> <span class="toc-text">将每一行开头处的尖括号和空格删除（解除引用）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#移除大部分的HTML标签（包括跨行标签）"><span class="toc-number">1.9.9.</span> <span class="toc-text">移除大部分的HTML标签（包括跨行标签）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul-Dhesi的一-个脚本修改而来。）"><span class="toc-number">1.9.10.</span> <span class="toc-text">将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一 个脚本修改而来。）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU-sed使用字元“-v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。"><span class="toc-number">1.9.11.</span> <span class="toc-text">将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以用其他未在文件中使用的字符来代替它。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分别压缩每个-TXT文件，压缩后删除原来的文件并将压缩后的-ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir-b”-显示不带路径的文件名）。"><span class="toc-number">1.9.12.</span> <span class="toc-text">分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b” 显示不带路径的文件名）。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。"><span class="toc-number">1.9.13.</span> <span class="toc-text">使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。</span></a></li></ol></li></ol></li></ol>
        </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-26296890-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


</html>